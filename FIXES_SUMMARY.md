# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1Ô∏è‚É£ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–º—ã –º–æ–≥–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–†–µ—à–µ–Ω–∏–µ**: –ì–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ `bot_data['generation_locked']`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### 2Ô∏è‚É£ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—á–∏–Ω–∞—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- **–†–µ—à–µ–Ω–∏–µ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, –±—ã–ª–∞ –ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞–º—è—Ç—å—é

### 3Ô∏è‚É£ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–†–µ—à–µ–Ω–∏–µ**: –ö–æ–º–∞–Ω–¥–∞ `/status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í–∏–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –ø—Ä–æ–±–ª–µ–º—ã

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –í –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏:
pip install psutil

# –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
pip install -r requirements.txt
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
```
/status
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- üíæ –ü–∞–º—è—Ç—å (RSS, VMS, %)
- üîí/üîì –°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚ö†Ô∏è –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚è∞ –°–ª–µ–¥—É—é—â–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
```
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
/generate 3

# –°—Ä–∞–∑—É –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ—â–µ —Ä–∞–∑:
/generate 2

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ‚ö†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
```

## üìä –õ–æ–≥–∏

### –ö–æ–Ω—Å–æ–ª—å
```
üîí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
[batch_start] –ü–∞–º—è—Ç—å: 450MB RSS, 12%, –ø–æ—Ç–æ–∫–∏: 15
[gen_0_0_start] –ü–∞–º—è—Ç—å: 455MB RSS, 12.5%
[gen_0_0_end] –ü–∞–º—è—Ç—å: 520MB RSS, 14.2%
üîì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
[after_unlock] –ü–∞–º—è—Ç—å: 480MB RSS, 13.1%
```

### generation_state.json (–ø—Ä–∏ –æ—à–∏–±–∫–µ)
```json
{
  "state": "generation_error",
  "details": {
    "error": "...",
    "memory": {"rss_mb": 850, "percent": 23.4}
  }
}
```

## üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏–∏

‚úÖ **–ù–µ–≤–æ–∑–º–æ–∂–Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤: `/generate`, scheduled, `/runscheduled`

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**
- –î–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–±–ª–æ–∫ `finally`)

‚úÖ **–û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏**
- `gc.collect()` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞–º—è—Ç–∏
- –ü—Ä–∏—á–∏–Ω–∞ –≤ `/status` –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- ‚úèÔ∏è `app/crash_handler.py` - —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–∞–º—è—Ç–∏
- ‚úèÔ∏è `bot.py` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∫–æ–º–∞–Ω–¥–∞ `/status`
- ‚úèÔ∏è `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω `psutil`

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:
```
/status
```

–ï—Å–ª–∏ –ø–∞–º—è—Ç—å >80%:
- –£–º–µ–Ω—å—à–∏—Ç–µ `DAILY_GENERATIONS`
- –£–≤–µ–ª–∏—á—å—Ç–µ RAM —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `GENERATION_LOCK_FIX.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `QUICK_FIX_SUMMARY.md` - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞
