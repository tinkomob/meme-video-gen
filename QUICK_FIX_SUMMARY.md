# –ë—ã—Å—Ç—Ä–∞—è —Å–≤–æ–¥–∫–∞: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å 2 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–∂–µ –∏–¥–µ—Ç

‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
- –ö–æ–º–∞–Ω–¥–∞ `/status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**
- `gc.collect()` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ `finally`

‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏ –≤ –ª–æ–≥–∞—Ö
- –ü—Ä–∏—á–∏–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–±–æ—è –≤ `/status`
- –î–µ—Ç–∞–ª–∏ –≤ `generation_state.json`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install psutil
```

## –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
/status  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ Telegram:
/generate 3

# –°—Ä–∞–∑—É –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ—â–µ —Ä–∞–∑:
/generate 2

# –û–∂–∏–¥–∞–µ–º–æ: ‚ö†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
```

### –¢–µ—Å—Ç 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ Telegram:
/status

# –û–∂–∏–¥–∞–µ–º–æ:
# üíæ –ü–∞–º—è—Ç—å: X MB
# üîì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: –°–í–û–ë–û–î–ù–ê
```

### –¢–µ—Å—Ç 3: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
```bash
# –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:
/status

# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –ø—Ä–æ–±–ª–µ–º—É –µ—Å–ª–∏ –±—ã–ª–∞
```

## –õ–æ–≥–∏

### –í –∫–æ–Ω—Å–æ–ª–∏
```
üîí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
[batch_start] –ü–∞–º—è—Ç—å: 450MB RSS, 1200MB VMS, 12%, –ø–æ—Ç–æ–∫–∏: 15
[gen_0_0_start] –ü–∞–º—è—Ç—å: 455MB RSS, 1205MB VMS, 12.5%, –ø–æ—Ç–æ–∫–∏: 16
üîì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
[after_unlock] –ü–∞–º—è—Ç—å: 480MB RSS, 1250MB VMS, 13%, –ø–æ—Ç–æ–∫–∏: 15
```

### –í generation_state.json (–ø—Ä–∏ –æ—à–∏–±–∫–µ)
```json
{
  "state": "generation_error",
  "details": {
    "error": "...",
    "memory": {"rss_mb": 850, "percent": 23.4}
  }
}
```

## –ì–∞—Ä–∞–Ω—Ç–∏–∏

1. ‚úÖ –ú–µ–º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è **—Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**
2. ‚úÖ **–ù–µ–≤–æ–∑–º–æ–∂–Ω–∞** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
3. ‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ **–∏–∑–≤–µ—Å—Ç–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞** (–ø–∞–º—è—Ç—å/–æ—à–∏–±–∫–∞)
4. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è **–æ—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏** –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **–†–µ–≥—É–ª—è—Ä–Ω–æ**: `/status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞–º—è—Ç–∏
- **–õ–æ–≥–∏**: console output –ø–æ–∫–∞–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- **–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞**: `/status` –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–∏—á–∏–Ω—É

## –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

–ï—Å–ª–∏ –ø–∞–º—è—Ç—å >80%:
- –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- –£–≤–µ–ª–∏—á–∏—Ç—å RAM
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ (MoviePy clips –Ω–µ –∑–∞–∫—Ä—ã—Ç—ã)

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `app/crash_handler.py` - –¥–æ–±–∞–≤–ª–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏
- `bot.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∫–æ–º–∞–Ω–¥–∞ `/status`
- `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω `psutil`
- `GENERATION_LOCK_FIX.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
